{% extends "base.html" %}

{% block title %}DonsHack Marketplace{% endblock %}

{% block content %}
<div class="container">
  <h2>Books for Sale</h2>

  {% if current_user.is_authenticated %}
    <div class="buttons">
      <a href="{{ url_for('post_book') }}"><button>Post a Book</button></a>
    </div>
    {% for book in books %}
      <div class="book-pair">
        {% if book.image_filename %}
          <img class="book-img" src="{{ url_for('uploaded_file', filename=book.image_filename) }}" alt="Book Image" />
        {% endif %}
        <div class="book-info">
          <h3>{{ book.title }}</h3>
          <p><strong>Course:</strong> {{ book.course }}</p>
          <p><strong>Price:</strong> ${{ book.price }}</p>
          <p><strong>Contact:</strong> {{ book.contact_info }}</p>
        </div>
      </div>
    {% else %}
      <p>No books posted yet.</p>
    {% endfor %}
  {% else %}
    <p>You need to log in to post books or view details.</p>
    <a href="{{ url_for('login') }}"><button>Login</button></a>
  {% endif %}
</div>
{% endblock %}
